<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>tekuto.net</title>
        <link rel="stylesheet" href="style.css" />
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-23511137-1']);
            _gaq.push(['_setDomainName', '.tekuto.net']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </head>
    <body>
<!--過去ログ用
        <div>
            <p><a href="/">戻る</a></p>
        </div>
-->
<!-- ここから過去ログ時に削除 -->
        <h1>tekuto.net</h1>
        <div>
            <p>メール:g.tekuto@gmail.com</p>
            <p><a href="http://twitter.com/tekuto" target="_blank">twitter</a></p>
        </div>
<!--テンプレート
        <hr />
        <div>
            <h2>YYYY/MM/DD hh:mm</h2>
            内容
        </div>
-->
<!-- ここまで -->
        <hr />
        <div>
            <h2>2013/10/02 22:30</h2>
            <p>マウスも対応した。</p>
            <p>＊</p>
            <p>vmwareにつっこんだgentooは、割といい感じに動いている。</p>
            <p>open-vm-tools-kmodのインストールは、カーネルを3.9系のものにすることで対応した。</p>
            <p>「複数のモニタを循環する」とかいう、何言ってんのか分からない機能を使うことで、複数のモニタにフルスクリーン表示することができていい感じ。</p>
            <p>OpenGLも使えたが、想定通りというか、おまけっぽい印象を受けた。とりあえず、深度バッファが機能していないっぽかった。あるいは、プログラムの方がいけないのかもしれない。深度バッファのサイズ指定してなかったかも。</p>
            <p>そうでなくても、OpenGL2.1ぐらいまでしか対応しないようなので、期待はできない。</p>
            <p>とりあえずブラウザや動画プレイヤーをインストールしてみて、どんな感じで動作するのか確認する。</p>
            <p>vmware上でgentooを動かしているマシンはCPUがintel-vtに対応してないcore2quadなので、amd-vに対応したメインマシンではどうなることやら。性能上がるといいんだけど。</p>
            <p>ああ、あとグラボもよくなる。メーカーからして違うが、げふぉのローエンドかららでおんのミドルエンドになる。</p>
            <p>intel-vtに対応していないせいで、32bit版のgentooを入れるはめになったが、メインマシンには64bit版を入れる予定。</p>
            <p>＊</p>
            <p>32bitのマシンでdpをビルドして分かったことは、OpenGLの定数をenumで定義するのはびみょうだということだ。unsigned long longな値とかあるせいで、コンパイルエラーになる。</p>
            <p>enumではなくconst autoにしたら通ったので、後で直しておこう。</p>
        </div>
        <hr />
        <div>
            <h2>2013/10/02 05:20</h2>
            <p>とりあえずキーボード対応した。</p>
            <p>＊</p>
            <p>windows側、うまくできるか不安。</p>
            <p>＊</p>
            <p>そんなことより、仮想マシンにつっこんでるwindowsがまれによくホスト巻き込んでフリーズして参ったので、ホストをwindowsにしようかと思っている。</p>
            <p>まず、すでにwindowsが入っているマシンにvmwareを入れて、その上にgentooをインストールして色々試してみることにする。</p>
            <p>しかし、VMWarePlayer、バージョン5かららしいが、バルーンヒントが消せない。</p>
            <p>「お使いのコンピュータに戻るには、Ctrl+Altを押してください」とかいうのが毎回出てきてうざい。</p>
            <p>それが出てるところクリックしても、その下をクリックしたことにならないし邪魔なことこの上ない。</p>
            <p>前のバージョンを使えるようなら変えてしまおうかしら。</p>
            <p>＊</p>
            <p>あと、vmware toolsのインストールがうまくいかない。</p>
            <p>gentooのリポジトリにopen-vm-toolsとかいうのがあるので、それをインストールしようとしているのだが、open-vm-tools-kmodのインストールでこける。</p>
            <p>どうやら、新しいカーネルに対応していない記述になっているらしい。</p>
            <p>ちょっと検索してみたら対応するためのパッチが見つかったので使おうとしたが、どうも古いバージョンのvmware tools用らしくパッチが失敗する。</p>
            <p>すごいめんどくさい。しかしやらねば。どう対応しよう。古いカーネルのソースからカーネルを構築しようかしら。それが一番楽そう。</p>
        </div>
        <hr />
        <div>
            <h2>2013/10/01 04:00</h2>
            <p>細かい修正をしていた。</p>
            <p>＊</p>
            <p>そう細かくないこともしてたけど。インターフェース変えたり。</p>
            <p>ウィンドウやディスプレイの幅、高さ、位置などのデータをdp::Long（long long型）やdp::ULong（unsigned long long型）にしてたのをやめた。dp::Int（int型）で統一した。</p>
            <p>理由としては、幅や高さをOpenGLで使用する場合に不便だから。それに、幅や高さの指定に64bit整数が必要になることなんて、絶対にないなんてことはないだろうけど、まぁすぐには必要にならんだろう。</p>
            <p>パソコンのディスプレイの解像度なんか、1920x1080とかいうクソみたいなのが主流のようだし。横長やめろよテレビじゃねぇんだぞ。</p>
            <p>＊</p>
            <p>あと、linuxの場合のみだが、dp_commonのロード時、アンロード時に行なっていたXOpenDisplay()やXCloseDisplay()の呼び出しを、別のライブラリ（dp_xlib）に分離した。</p>
            <p>dp_windowやdp_displayなどで必要になるので、共通的なdp_commonのロード時、アンロード時に処理させてたんだけど、dp_commonはdpを使用するプログラムに必須。コマンドライン引数の処理からしてdp_commonの関数を使ってるし。</p>
            <p>なので、dp_windowやdp_displayなどを使わないプログラムであっても、XOpenDisplay()やXCloseDisplay()が呼び出されることになってしまう。そんな無駄なことはしたくないので、別のライブラリに分離して、それをdp_windowやdp_displayなどから参照する、という形にした。</p>
            <p>＊</p>
            <p>そんな感じか。この次はキーボードとマウスの対応を行なう。</p>
            <p>キーボードの対応がうまくできる気がしなかったので今まで敬遠してたんだけど、風呂入ってる時にいいアイデアが浮かんだので試すことにする。起きたら。</p>
            <p>＊</p>
            <p>そういえばpulseaudioの利用周りを修正するみたいなこと言ってたけど、想像以上に無茶そうなのでやめた。</p>
            <p>オブジェクトの破棄時にもロックする必要があるとか困る。std::unique_ptrで対応できないじゃないか。</p>
            <p>ああ、あるいはpa_threaded_mainloopではなくpa_mainloopにすればよかったんかな。キーボードとマウスを対応したら試してみるか。</p>
        </div>
<!--過去ログ用
        <hr />
        <div>
            <p><a href="/">戻る</a></p>
        </div>
-->
<!-- ここから過去ログ時に削除 -->
        <hr />
        <div>
            <h2>過去ログ</h2>
            <p><a href="201309.html">201309</a></p>
            <p><a href="201308.html">201308</a></p>
            <p><a href="201307.html">201307</a></p>
            <p><a href="201306.html">201306</a></p>
        </div>
<!-- ここまで -->
        <div id="for-nostylesheet">
            <hr />
            <img src="images/uni.png" />
        </div>
    </body>
</html>
