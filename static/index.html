<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>tekuto.net</title>
        <link rel="stylesheet" href="style.css" />
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-23511137-1']);
            _gaq.push(['_setDomainName', '.tekuto.net']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </head>
    <body>
        <h1>tekuto.net</h1>
        <div>
            <p>メール:g.tekuto@gmail.com</p>
            <p><a href="http://twitter.com/tekuto" target="_blank">twitter</a></p>
        </div>
<!--テンプレート
        <hr />
        <div>
            <h2>YYYY/MM/DD hh:mm</h2>
            内容
        </div>
-->
        <hr />
        <div>
            <h2>2013/06/10 01:11</h2>
            <p>画面が1つできた。</p>
            <p>＊</p>
            <p>なんとなくローペースな気がするが、webアプリは経験が浅いので仕方がない面もあるのだろう。焦らずやろう。</p>
            <p>画面ができただけで、鯖側は完全に未実装。起きたら作る。</p>
            <p>作ったのは、サイトに記事を追加したりするアカウントを追加するための、招待メール送信画面。招待メールに一定時間有効なURLが記載されていて、そこにアクセスすると対応するアカウントが作られるとか、そこらによくあるあれだ。といっても記事を追加するのは私だけなんで、この画面を使うのも私だけ。</p>
            <p>なので、シンプル＆手抜きな画面になった。<a href="images/201306100111_00.png" target="_blank">こんな感じ。</a>この画面にアクセスするためには、サイトの管理者としてログインしなければならない。その仕組みはGoogleが用意してくれているのでらくちん。その上、この画面は私がアカウントを追加する時に有効にして、以降は無効化、アプリに処理を含めすらしないので、セキュリティ的にも問題はないと思う。</p>
            <p>サイトの管理者を乗っ取った上、私がアカウントを追加するために、この画面を有効にした時を狙えば、私以外のアカウントが作られたり、ということは可能だろうけど、まぁ不可能だろう。</p>
            <p>私しか使わないので、入力したメールアドレスが正しいかどうかなんてチェックしていない。めんどいし。一応、招待メール無効機能とか付けてるけど、多分完全に死に機能。</p>
            <p>あと、この画面はJavaScriptが有効じゃないと機能しない。JavaScriptを使わない版も、作れなくはないだろうけどめんどいしなぁ。私が使わんだろうし、多分作らない。</p>
            <p>＊</p>
            <p>とまぁ、私しか使わないのをいいことに手抜きしまくりだけど、他の人も見る画面についてはそんなことする予定はないので安心するといい。シンプルなのは多分直らんだろうけど。めんどいし。</p>
            <p>ちなみに、今日作った画面はtekuto.netのものではない。記事とかなんやらのデータはRESTfulなAPIを提供する他の鯖アプリで管理し、tekuto.netはそのAPIを利用するだけのクライアントアプリにする、とかそういう想定。妄想。</p>
            <p>やろうとすれば、例えばAndroidアプリとしてクライアントアプリを作って、そこから鯖アプリにアクセスしてどうのこうの、とかもできるようにする感じ。やらんだろうけども。やったとしても私専用。他の人が<a href="https://play.google.com/store/apps/developer?id=livedoor" target="_blank">わざわざ専用アプリで閲覧するメリットが感じられん。</a></p>
            <p>RSSリーダ使えよ。RSSの存在自体知らない人向けなの？</p>
            <p>私もRSSくらい配信すると思うんで、ヲチしたい奇特な人はそれ利用するといいと思う。</p>
            <p>＊</p>
            <p>ちなみにRESTfulなAPIを提供する鯖アプリのリポジトリは<a href="https://bitbucket.org/tekuto/mermarron" target="_blank">ここ</a>なんだけど、内部の処理もできてからpushする予定なのでまだ空っぽ。予定通りにいけば明日中にはpushできるんじゃないかな。</p>
        </div>
        <hr />
        <div>
            <h2>2013/06/09 20:12</h2>
            <p><a href="http://golang.org" target="_blank">Go</a>をやっている。</p>
            <p>＊</p>
            <p>日本語情報は<a href="http://golang.jp" target="_blank">こっち</a>で、wikipediaは<a href="http://ja.wikipedia.org/wiki/Go_(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E8%A8%80%E8%AA%9E)" target="_blank">こっち</a>。以前から興味があったし、GAEで使えるんだし、ということで使うことにした。Pythonでもよかったんだけど、せっかくなので新しい物にチャレンジ。</p>
            <p>文の末尾にセミコロンがいらない、というところで若干つまずいた。厳密にはいらないのではなく、コンパイラが勝手に付けて解釈しているらしく、まずいところで改行すると文の途中なのにセミコロンが入ってしまうような感じになって、コンパイルエラーになっちゃったりしてた。</p>
            <p>でもまぁ、その辺理解したら、いつも書いているような、関数の宣言や呼び出しで、引数1つに1行使う形式で書くことができた。推奨はされなさそうだけど、diff取った時に変更点が一目で分かって便利なので仕方がない。</p>
            <p>＊</p>
            <p>変数への値の代入演算子(=)とは別に、初期化演算子(:=)が用意されていて、初期化演算子を使えば</p>
            <p>var 変数名 型 = 値</p>
            <p>とか</p>
            <p>var 変数名 = 値</p>
            <p>とか書かなければならないところを</p>
            <p>変数名 := 値</p>
            <p>にできるところとか、地味にうれしい。:=で既に存在している変数を初期化しようとしたり、=で存在しない変数に代入しようとしたりするとコンパイルエラーになる。</p>
            <p>なので、PHPやPerlなどのような明示的な変数の宣言が不要な関数でありがちな、変数に値をセットしようとして、変数名間違えちゃって新しい変数が作られちゃった、値をセットしようとした変数の値は変わってないので動くんだけど動作がおかしい、とかいうびみょうに問題箇所を見つけにくいバグが起こらず、それでいてそれらと同等の簡素な記述ができる。いいことだ。</p>
            <p>＊</p>
            <p>例外処理は存在しないんだけど、関数を抜けた時に処理を行うようにするdeferというものがあり、これでRAIIと同じようなことができるので大して困らなそう。</p>
            <p>スレッドは存在しないみたいだけど、ゴルーチンというものがあって、それで処理の並列化ができる。チャネルというものを使えば、同期を取ることもできる。らしい。どっちもまだ使ってない。deferもだけど。</p>
            <p>パッケージ外へ提供するもの、しないものの設定方法がちょっとユニーク。先頭文字が大文字ならパッケージ外からアクセスできる、小文字ならできない。らしいんだけど、小文字のものでもアクセスできる場合があるんだけどいいのかなぁ。</p>
            <p>名前によって外部からアクセスできるかどうか決める、というのはちょっとPythonぽいな、とか思った。あっちはほとんどただのコーディング規約だけど。</p>
            <p>構造体とかインターフェース周りもまだ触っていないんだけど、JavaやC++のクラスとかとはまた違った空気がしていて興味深い。</p>
            <p>＊</p>
            <p>dpをGoで書くのもありかもしんないなぁとか思った。</p>
        </div>
        <hr />
        <div>
            <h2>2013/06/07 00:18</h2>
            <p>おはようございます。</p>
            <p>＊</p>
            <p>諸事情によりサーバを移転しました。現在はサーバというか、<a href="https://developers.google.com/appengine/?hl=ja" target="_blank">Google App Engine</a>の1アプリとしてサイトを稼働させています。</p>
            <p>＊</p>
            <p>ある日、レンタルスペースに配置したMovable Typeにログインしても、ページ遷移したらすぐログアウトしちゃうようになってて、困っていた。</p>
            <p>原因はDBの容量がいっぱいになっちゃてて、セッション情報すら持てないような状況だった、ってことなんだけど。</p>
            <p>サイトのコントロールパネルから、DBの全テーブルに最適化をかければいくらか容量空くだろう、と思って最適化しようとするも、insertできません＞＜権限ないんで＞＜とかわけのわからんこと言われるし。</p>
            <p>deleteは通るし、とりあえずスパムコメントのレコードだけでも消しておくか、なんか変わるかもしれんし、とかやって放置していた。</p>
            <p>＊</p>
            <p>で、今日になって、dpにまた1つ機能ができたので、それについて記事書くかーとMovable Typeにログインしようとしたら404。サイトのコントロールパネルにログインしたら、アカウントはブロックされていますだって。</p>
            <p>私だってなんとかしたかったがどうしようもなかったからしょうがないじゃないの。どうすりゃよかったと言うのだ。問い合わせ？英語むり。</p>
            <p>そんなわけで、以前から考えていたGoogle App Engineへの移転に踏み切ったわけです。DBの容量10MBとか最初から無茶だったんだ。アカウントはブロックされていますのページに可能な対応と思われることが色々書かれていたが英語とか読めねぇしもうたくさんだ。海外の鯖なせいかレスポンス性能もよろしくないというか稀によく落ちてるし。</p>
            <p>Google App EngineはGoogle先生が運営してるんで、レスポンス性能は前よりずっといいと思う、多分。稀によく落ちることもないんじゃないかな、多分。</p>
            <p>＊</p>
            <p>Google App Engineに移転したといっても、現時点では<a href="https://bitbucket.org/tekuto/tekuto-net/src" target="_blank">見ての通り</a>タグ打ちの静的なページだけ。staticの中ね。</p>
            <p>そのうち、タグ打ちしなくてもブラウザ上から投稿だとか、投稿に対してコメントだとか、そういうのできるようにする予定は一応あるんで。</p>
            <p>でもめんどいんでしばらくお待ち下さいと思ったが、dpがちょうどいいところだし、進めてみようかなぁ。</p>
            <p>飽きたらすぐdpの開発に戻るが。</p>
            <p>＊</p>
            <p>とまぁ、しばらくはこんな感じで、昔みたいな1ページ運用になるのでよろしくお願いします。</p>
        </div>
        <div id="for-nostylesheet">
            <hr />
            <img src="images/uni.png" />
        </div>
    </body>
</html>
