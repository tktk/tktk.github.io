<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>tekuto.net</title>
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-23511137-1']);
            _gaq.push(['_setDomainName', '.tekuto.net']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </head>
    <body>
        <div>
            <p><a href="/">戻る</a></p>
        </div>
        <hr />
        <div>
            <h2>2013/06/30 21:20</h2>
            <p>oh、androidでwiiリモコン動かすの難しいネ。</p>
            <p>＊</p>
            <p>wiiリモコンと端末をペアリングするところからしてうまくいかない。</p>
            <p>androidはPINの入力を要求してくるんだけど、PINは不要らしい？でも空入力とかできないし。</p>
            <p>既存のアプリのソースを見てみたかったが、なかなか見つからなかった。</p>
            <p>幸いにも、<a href="https://play.google.com/store/apps/details?id=com.hexad.bluezime" target="_blank">BluezIME</a>というアプリは<a href="https://code.google.com/p/android-bluez-ime/" target="_blank">プロジェクトのページ</a>でソースが公開されていた。</p>
            <p>ただアプリをインストールするだけでは、wiiリモコンは使えない。何やら、l2capなるものが使える端末でないと動かせないらしく、上のプロジェクトのページで配布されているHIDEnablerをインストールすることで使用可能になる。</p>
            <p>ソースを読んでみようと思ったのだが、なんかめんどくなってきた。そんなに量が多いわけではないのだが。</p>
            <p>端末に搭載されているペアリング機能を使わずにペアリングを行なうっぽいところからしてめんどくさい。どこに書いてあるんだろう。</p>
            <p>＊</p>
            <p>とまぁソースを読むのがめんどうで一気にモチベーションが下がったので、早々にdpの方に戻ろうかなぁ。昨日色々書いたのを参考に進められるかもしれん。</p>
            <p>でもまぁ謎のままにしときたくないというか作りたいので、暇を見つけては解読することにしよう。</p>
        </div>
        <hr />
        <div>
            <h2>2013/06/30 03:50</h2>
            <p>antroid直した。</p>
            <p>＊</p>
            <p>sdkに含まれているbuild.xmlを見ていたら、なんか、lintなるツールが追加されたらしい。よく分からんが、<a href="http://andbrowser.com/development/knowhow/712/android-lint/" target="_blank">このページ</a>によればなんか知らんがすごそう。</p>
            <p>＞これは、Androidプロジェクトのソースコードの潜在的な不具合を発見するためのものです。</p>
            <p>なんか知らんがすごそう。上のページに色々書いてあるようだが、そこまでしか読んでないから全然分からんけど。</p>
            <p>＊</p>
            <p>というわけでビルドとかできるようになったので、少しandroidアプリを作ってみようかしら。</p>
            <p>dpの方は、pulseaudioを使った音声出力デバイスの列挙とか、接続・切断の検知をできるようにしたところで、一応一段落している。</p>
            <p>次は音声を出力したいが、クラス名とかどうしたもんかなーとか。AudioPlayerか？とも思ったが、あまり色々な機能を提供する気がない。というか、コンストラクタでopen()して、write()で音声を出力して、デストラクタでclose()する、というのを想定している。これを指して、AudioPlayerというのは適当でない気がする。</p>
            <p>となるとAudioWriterかなぁとも思ったが、しっくりこない不思議。ううむ。</p>
            <p>dp::AudioWriter(仮)を作るにしても、どうしても出力デバイス管理クラス、dp::SpeakerManagerに依存しなければならない、多分。</p>
            <p>dp::SpeakerManagerは、音声出力デバイスが接続されると一意に対応するdp::SpeakerKeyを作ってイベントハンドラを呼び出すとかするんだけど、音声を出力する場合、dp::SpeakerManagerのメンバの、pa_contextが必要になる。</p>
            <p>できることなら、</p>
            <p>dp::AudioWriter writer( speakerKey );</p>
            <p>writer.write( ... );</p>
            <p>みたいな感じでやりたいんだけど、pa_contextが必要だからdp::SpeakerManagerと関連付けないといかん気がする。</p>
            <p>しかし私としては、デバイスの検出が済んだらdp::SpeakerManagerを破棄して、dp::AudioWriterを作る、とかいう風にもできるようにしたい。依存関係を持たせるとそれができなくなる。</p>
            <p>pulseaudioのデータは、基本的に参照カウントで管理しているっぽいので、pa_contextのポインタだけをdp::SpeakerKeyに持たせる、とかいう方法もいけるのかなぁ。いけるなら、dp::SpeakerKey生成時に参照カウントを増やし、破棄時にカウントを減らし、dp::AudioWriter(仮)の時も同じようにすればいけるのかなぁ。</p>
            <p>などなど。あ、そういえば非同期な音声出力をまだ試してないなぁ。pa_streamとかっぽいんだが。</p>
            <p>＊</p>
            <p>などと長々書いたが、色々と考えはあるものの、あまりモチベーションが上がらない。のでandroidアプリの方を進めてみようかな。</p>
            <p>androidどころか、javaからして久しぶりだなぁ。jdk入れてなかったし。jreも入れてなかった。</p>
            <p>とりあえずbluetoothデバイスをいじくる系のアプリを作ろう。まずはペアリングから。前に、android端末同士をペアリングして、テキストを送受信する簡単なアプリを作ったことがあったが、ソースは無くしてしまったようだ。残念。</p>
        </div>
        <hr />
        <div>
            <h2>2013/06/26 14:42</h2>
            <p>久々にandroidアプリをいじりたくなった。</p>
            <p>＊</p>
            <p>今の環境にsdkやらndkやらを入れていなかったので、まずは環境構築から。sdkを入れた後に、sdkに含まれているツールを使って色々落とさないといけないのがめんどい。</p>
            <p>前に作ったantroidが使えるかどうか試したが、プロジェクト作成は使えるもののビルドとかがうまくいかなかった。過去の環境にあるsdkと、新たに配置したsdkに用意されているbuild.xmlに差異があったので、ant周りにも変更が入っているようだ。修正が必要だ。</p>
            <p>＊</p>
            <p>目的は、wiiリモコンを使えるようにする。で、wiiリモコンで遊べるゲームを作りたい。</p>
            <p>wiiリモコンの制御自体は、すでに他の人がアプリを公開しているようだが、見た限りではどれもこれも、wiiリモコンをbluetoothキーボードとして使えるようにするとか、そんな感じ。そんなのは邪道だ。</p>
            <p>考えているのは、アプリとwiiリモコンが直接通信し、制御する。そのアプリに対し、wiiリモコンを使いたいアプリが接続し、制御アプリを介してwiiリモコンを制御する、みたいな？wiiリモコンの鯖を作るような感じか。</p>
            <p>鯖との通信はソケット通信かな。androidに搭載されているプロセス間通信で、他にいいのがあればそっちを使うんだけど。</p>
            <p>まぁ、優先順位は高くない。ビルドが通らないんでantroidを修正しないといかんし、現時点でもsdkのツールを使ったダウンロードが遅すぎて終わる気配がしないし。これまた気分転換する時に進めようかと。</p>
            <p>＊</p>
            <p>ぷよぷよ楽しい。</p>
        </div>
        <hr />
        <div>
            <h2>2013/06/21 17:40</h2>
            <p>無駄に疲れた。</p>
            <p>＊</p>
            <p>なんとか、デバイスを列挙する方法とか、接続・切断を検知する方法は把握した。</p>
            <p>しかし、ドキュメントが分かりにくい。<a href="http://freedesktop.org/software/pulseaudio/doxygen/" target="_blank">これ</a>なんだけど、英語なのはまぁしゃーない。そこまで期待してない。</p>
            <p>まずファイル名が分かりにくい。<a href="http://freedesktop.org/software/pulseaudio/doxygen/files.html" target="_blank">これ</a>。あれ？それほどでもないか？ファイル名というより、どの機能がどのヘッダファイルにあるのかが分かりにくい。デバイスの列挙や接続・切断の検知関係は<a href="http://freedesktop.org/software/pulseaudio/doxygen/introspect_8h.html" target="_blank">introspect.h</a>とかいうヘッダファイルに書かれてるし。なんやねんintrospectて。日本語でおk。</p>
            <p>pavucontrolのソースを読んでpa_sink_infoとかpa_source_infoとかいう、デバイスの情報が入っている構造体があるのは分かったが、どのヘッダファイルに定義されているか分からなくていちいちgrepかけるはめになった。</p>
            <p>で、あとはドキュメントの内容が簡潔すぎる。関数1つにつき説明は大体が1行、というか一言、引数や戻り値については説明がない。それで使えるのならいいのだが説明ないと分からんこと多いし。情報が入ってそうな構造体のポインタがnullだった時とかどうしようと思ったわ。</p>
            <p>ドキュメントを自動生成とかで作るのは構わないが、役に立たんものを見せられても困るわ。関数の名前とかもいまいちピンと来ないし。その辺気を付けて、ドキュメントとか作らなくていいんで作り直して欲しい気さえする。</p>
            <p>結局、役に立ったのはpavucontrolのソースだった。</p>
            <p>＊</p>
            <p>あーあ、なんか無駄に疲れた。疲れたというかやる気を吸い取られた感。</p>
        </div>
        <hr />
        <div>
            <h2>2013/06/19 15:17</h2>
            <p>pulseaudioをいじっているが、うーん。</p>
            <p>＊</p>
            <p>ドキュメントを読んでも、シンプルなAPIと非同期なAPIの2種類がある、ということ以外はいまいち要領を得ない。</p>
            <p>で、シンプルなAPIを使ってWAV形式のファイルを鳴らす、というのはできた。</p>
            <p>しかし、デバイス名を指定する箇所はあるのだけれど、何を入れたらいいのか分からん。文字列なんだけど、pavucontrolで表示されるデバイス名入れてもだめっぽいし。</p>
            <p>というかデバイスの列挙とか検知とかどうやるんだ。pavucontrolではできてるんだから、何かはあるんだろうけど、最悪udevでやることになるのかなぁ。</p>
            <p>pavucontrolのソースを読むのが一番手っ取り早いだろうか。</p>
            <p>＊</p>
            <p>と、ここまでが昨日書いた内容。書いている途中でめんどくなってしまった。</p>
            <p>今pavucontrolのソースを読んでいるが、pulseaudio自体にデバイス管理の機能が存在しているようでよかった。</p>
            <p>非同期なAPIとデバイス管理、どっちを先にやるかなぁ。なんとなくシンプルなAPIでも問題なくできる気がしないこともないのだが、シンプルなAPIだと複数の音声を出力するためには同時に出力する数だけ接続を確立する必要がある。</p>
            <p>これがalsaならなんだそんなこと、とあまり気にしないのだが、pulseaudioの場合、接続1つ1つについて、音量を調節できたりする。自前で音量調節のコードを書かずとも、pavucontrolを使えば調節できる。で、同時に鳴らす数だけ接続が存在するので、例えばBGMとSEの音量を個別に調節できる、というのは便利だろうけど、実際にはSE1つ1つ、異なる音量調節をするような感じになってしまう。多分。さすがに分けすぎである。</p>
            <p>なので、利便性とかを考えた場合、やはり非同期なAPIは使う必要があるだろうなぁ、とか。</p>
            <p>でもまぁ、とりあえずはデバイス管理が先かな。シンプルなAPIや非同期なAPIとは独立した機能っぽいし。</p>
        </div>
        <hr />
        <div>
            <h2>2013/06/14 16:04</h2>
            <p>昨日からまた<a href="https://www.modmypi.com/raspberry-pi/raspberry-pi-and-modmypi-case" target="_blank">RaspberryPi</a>をいじくり始めている。</p>
            <p>＊</p>
            <p>前に作った環境は、glibcのバージョンを上げたら戻せなくなって、それが原因で色々なところで詰んでしまって、にっちもさっちもいかなくなってしまった。</p>
            <p>なので、環境から作り直している。無論gentooである。現在gcc4.8.1をemerge中。昨日の日付が変わった頃から始めたと思うので、多分日付が変わる頃には終わるだろう。</p>
            <p>終わっても、更に長いemerge -e systemとかemerge -e worldが待っているわけだが。</p>
            <p>前に作った環境はXをインストールしてデスクトップを使えるようにする、というのはやったけど、今回はとりあえずOpenGLを試したい。ModMyPiにある説明によれば、GPUの性能は×箱と同等らしいし。</p>
            <p>＊</p>
            <p>今までは上のリンクにあるモデルBしかなかったんだけど、今年の4月から<a href="https://www.modmypi.com/raspberry-pi/raspberry-pi-model-a" target="_blank">モデルA</a>も発売されていて、気になるところだ。</p>
            <p>モデルBと比較すると、LANポート削除、USBポートが2つから1つに、搭載メモリも512MBから256MBになっているなど、性能は落とされているが、その分価格も29.99ユーロから21.99ユーロになっている。</p>
            <p>更に、必要な電力も700mAから300mAになっていて、これはUSB2.0の供給電力である500mAより少ないので、パソコンのUSB2.0ポートに接続しても安定して動作するんじゃないかな、と思っている。モデルBはパソコンのUSB2.0ポートだと安定しないからなぁ。<a href="http://www.amazon.co.jp/gp/product/B002RL959W/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=B002RL959W&linkCode=as2&tag=tekutonet-22" target="_blank">これ</a>を使っている。</p>
            <p>ネットワークに繋がなくてもいい時はモデルAを使って、ネットワークに繋ぐ必要がある、パッケージのアップデートとかする時はモデルBを使う、とかそういうのを思い付いた。</p>
            <p>＊</p>
            <p>そういえば<a href="https://www.modmypi.com/raspberry-pi-expansion-boards/rasclock-raspberry-pi-real-time-clock-module" target="_blank">これ</a>もまだ試してない。せっかく買ってあるのにもったいない。<a href="https://www.modmypi.com/blog/installing-the-rasclock-raspberry-pi-real-time-clock" target="_blank">ここ</a>に導入方法が書いてあるが、ドライバモジュールはカーネルのメインラインには取り込まれていないようだ。めんどいなぁ。</p>
            <p>＊</p>
            <p>dpは、とりあえずウィンドウ周りは後回し。ディスプレイの解像度変更に関連して、フルスクリーン表示にするためにタイトルバーなどの装飾なし、リサイズ不可能なウィンドウもサポートしたいけど、フルスクリーンではない、装飾ありのウィンドウも絡めた構成がまだはっきりしない。</p>
            <p>前のプロジェクトだとウィンドウのサイズは変更できなかったけど、フルスクリーン時に解像度を変更すればそれに合わせてウィンドウサイズも変わるようにしたいし、それなら装飾ありの場合はウィンドウサイズを変更可能・不可能を選べてもいいんじゃないかなぁとか。変更可能なウィンドウを途中から不可能に変えたり、その逆とかもありかなぁとか。</p>
            <p>それらが実際にうまく機能するかとか、そもそも実現可能かとか、色々試してから作りを決定したい。</p>
            <p>＊</p>
            <p>で、音声出力周りを先にやっつける。前のプロジェクトに用意したAPIは、少し大げさと言うか、ライブラリレベルなのに余計な仕組みを作ってしまった気がするので、今回作るのはもっと単純にする。</p>
            <p>前回作ったのは、</p>
            <p>dp::AudioPlayer player( device, []( std::vector< char > &amp; _buffer ){ /*バッファに出力する音声データをつっこむ処理*/ } );</p>
            <p>いい加減だけど、こんな感じ？dp::AudioPlayerのコンストラクタでスレッドが作られ、インスタンスが存在している間音声を出力する、というもの。</p>
            <p>スレッドの中で第2引数のファンクタがバッファに出力データをセットし、第1引数の音声出力デバイスに出力する、ファンクタがデータを返さなくなったらdp::AudioPlayerを消滅できる、という感じ。ファンクタがデータを返し続けている間は、消滅させようとしてもデストラクタで処理待ちになる。</p>
            <p>便利と言えば便利なんだけど、環境毎の差異を吸収するライブラリでやることではなかったなぁ、と。なので、今回は単純に、音声出力デバイスをopenして、出力データをまとめたバッファをwriteして音を鳴らし、終わったらcloseする、とか、そういうのでいいんじゃないかなとか。より便利なのは、上位のライブラリに作ればいい。</p>
            <p>そうなると、前のプロジェクトじゃ使えなかったXAudio2とか使えるんかな？どういうAPIだったか忘れてしまったので調べ直す必要はあるが、WASAPIはサンプリングレートの変換処理とか必要だったからなぁ。そういうめんどい処理が省けて、問題なく利用できるなら使いたいところだ。</p>
        </div>
        <hr />
        <div>
            <h2>2013/06/13 05:20</h2>
            <p>疲れた。</p>
            <p>＊</p>
            <p>なんとか、本登録画面のURL（仮）を書いたメールを送出するところまで出来たっぽいんだけど、疲れた。</p>
            <p>ソースはpushしといたけど、続きはまたの機会にしようと思った。起きたらdpの方進める。</p>
            <p>何を作ればいいのかも分かっているし進められないことはないのだが、作業量が膨大になりそうだけどその割にできるもののスケールがそれに見合ってない気もするし、なによりなんかつまらん。やはりwebアプリは性に合わんらしい。</p>
            <p>またやりたくなったら進めることにする。</p>
            <p>＊</p>
            <p>Goはおもしろかったんで、たまにちょこちょこいじろう。</p>
        </div>
        <hr />
        <div>
            <h2>2013/06/12 04:58</h2>
            <p>データストア苦戦中。</p>
            <p>＊</p>
            <p>大体分かってきた。もうちょいでなんとかなりそうな気がする。</p>
            <p>初期の認識では、リレーショナルデータベースに例えると、テーブル1つに1つしか主キーを持てず、トランザクション内では同時に1テーブルの1レコードにしかアクセスできない、と思っていたので、こんなんどうやりゃいいんだと思っていたが。</p>
            <p>リレーショナルデータベースとはまた別物なので、リレーショナルデータベースには存在しない部分を知っていったら、なんとかなりそうな気がしてきている。</p>
            <p>確かに、リレーショナルデータベースで言うところの主キー、重複不可なキーデータは1つのデータ集合につき1項目しか持てないんだけど、というより強制的に持たされるが、キーデータ自体の参照を項目に加えられるので、専用のデータ集合を別に定義すれば解決できる。</p>
            <p>トランザクション内では同時に1データしかアクセスできないが、データ1つにつき1つだけ、親キーを指定することができ、親子関係にあるデータならアクセスできる。</p>
            <p>とか書いても、実際にやってみないと大体理解できないのだけど。</p>
            <p>＊</p>
            <p>リレーショナルデータベースは扱ったことあるけど、その経験が逆に引っかかってしまって、うまく理解できていなかった気がする。</p>
            <p>あと、GAE/Goのドキュメントが英語しかないのも理解が進みにくい1つなんじゃないかなと思っている。機能を把握しきれていない。</p>
            <p>トランザクション内じゃデータ検索クエリを実行できないんじゃないかなとか思ってたし。親キーを指定してフィルタリングかける関数とかあるんじゃないの。まだ使ってないが、クエリ投げた時に出たエラーメッセージからしてうまくいきそうな香りがぷんぷんしてるわ。</p>
            <p>＊</p>
            <p>明日中には、まとまった形になればいいのだけれど。把握できていなかったことを知れば知るほど、よりよいアイデアが湧いてくるからまとまらなくて困る。</p>
        </div>
        <hr />
        <div>
            <h2>2013/06/11 13:52</h2>
            <p>データストアで詰まっている。</p>
            <p>＊</p>
            <p>これからまた色々試すけど、データストアへの理解がいまひとつ。</p>
            <p>GoのデータストアにアクセスするAPIは、GQLとかないっぽい？なんか、全部関数で提供されているような。</p>
            <p>それはともかくとして、データストアを扱えないことにはGAEにデータを保存できないわけなので、がんばらんと。できるだけ早く。</p>
        </div>
        <hr />
        <div>
            <h2>2013/06/10 01:11</h2>
            <p>画面が1つできた。</p>
            <p>＊</p>
            <p>なんとなくローペースな気がするが、webアプリは経験が浅いので仕方がない面もあるのだろう。焦らずやろう。</p>
            <p>画面ができただけで、鯖側は完全に未実装。起きたら作る。</p>
            <p>作ったのは、サイトに記事を追加したりするアカウントを追加するための、招待メール送信画面。招待メールに一定時間有効なURLが記載されていて、そこにアクセスすると対応するアカウントが作られるとか、そこらによくあるあれだ。といっても記事を追加するのは私だけなんで、この画面を使うのも私だけ。</p>
            <p>なので、シンプル＆手抜きな画面になった。<a href="images/201306100111_00.png" target="_blank">こんな感じ。</a>この画面にアクセスするためには、サイトの管理者としてログインしなければならない。その仕組みはGoogleが用意してくれているのでらくちん。その上、この画面は私がアカウントを追加する時に有効にして、以降は無効化、アプリに処理を含めすらしないので、セキュリティ的にも問題はないと思う。</p>
            <p>サイトの管理者を乗っ取った上、私がアカウントを追加するために、この画面を有効にした時を狙えば、私以外のアカウントが作られたり、ということは可能だろうけど、まぁ不可能だろう。</p>
            <p>私しか使わないので、入力したメールアドレスが正しいかどうかなんてチェックしていない。めんどいし。一応、招待メール無効機能とか付けてるけど、多分完全に死に機能。</p>
            <p>あと、この画面はJavaScriptが有効じゃないと機能しない。JavaScriptを使わない版も、作れなくはないだろうけどめんどいしなぁ。私が使わんだろうし、多分作らない。</p>
            <p>＊</p>
            <p>とまぁ、私しか使わないのをいいことに手抜きしまくりだけど、他の人も見る画面についてはそんなことする予定はないので安心するといい。シンプルなのは多分直らんだろうけど。めんどいし。</p>
            <p>ちなみに、今日作った画面はtekuto.netのものではない。記事とかなんやらのデータはRESTfulなAPIを提供する他の鯖アプリで管理し、tekuto.netはそのAPIを利用するだけのクライアントアプリにする、とかそういう想定。妄想。</p>
            <p>やろうとすれば、例えばAndroidアプリとしてクライアントアプリを作って、そこから鯖アプリにアクセスしてどうのこうの、とかもできるようにする感じ。やらんだろうけども。やったとしても私専用。他の人が<a href="https://play.google.com/store/apps/developer?id=livedoor" target="_blank">わざわざ専用アプリで閲覧するメリットが感じられん。</a></p>
            <p>RSSリーダ使えよ。RSSの存在自体知らない人向けなの？</p>
            <p>私もRSSくらい配信すると思うんで、ヲチしたい奇特な人はそれ利用するといいと思う。</p>
            <p>＊</p>
            <p>ちなみにRESTfulなAPIを提供する鯖アプリのリポジトリは<a href="https://bitbucket.org/tekuto/mermarron" target="_blank">ここ</a>なんだけど、内部の処理もできてからpushする予定なのでまだ空っぽ。予定通りにいけば明日中にはpushできるんじゃないかな。</p>
        </div>
        <hr />
        <div>
            <h2>2013/06/09 20:12</h2>
            <p><a href="http://golang.org" target="_blank">Go</a>をやっている。</p>
            <p>＊</p>
            <p>日本語情報は<a href="http://golang.jp" target="_blank">こっち</a>で、wikipediaは<a href="http://ja.wikipedia.org/wiki/Go_(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E8%A8%80%E8%AA%9E)" target="_blank">こっち</a>。以前から興味があったし、GAEで使えるんだし、ということで使うことにした。Pythonでもよかったんだけど、せっかくなので新しい物にチャレンジ。</p>
            <p>文の末尾にセミコロンがいらない、というところで若干つまずいた。厳密にはいらないのではなく、コンパイラが勝手に付けて解釈しているらしく、まずいところで改行すると文の途中なのにセミコロンが入ってしまうような感じになって、コンパイルエラーになっちゃったりしてた。</p>
            <p>でもまぁ、その辺理解したら、いつも書いているような、関数の宣言や呼び出しで、引数1つに1行使う形式で書くことができた。推奨はされなさそうだけど、diff取った時に変更点が一目で分かって便利なので仕方がない。</p>
            <p>＊</p>
            <p>変数への値の代入演算子(=)とは別に、初期化演算子(:=)が用意されていて、初期化演算子を使えば</p>
            <p>var 変数名 型 = 値</p>
            <p>とか</p>
            <p>var 変数名 = 値</p>
            <p>とか書かなければならないところを</p>
            <p>変数名 := 値</p>
            <p>にできるところとか、地味にうれしい。:=で既に存在している変数を初期化しようとしたり、=で存在しない変数に代入しようとしたりするとコンパイルエラーになる。</p>
            <p>なので、PHPやPerlなどのような明示的な変数の宣言が不要な関数でありがちな、変数に値をセットしようとして、変数名間違えちゃって新しい変数が作られちゃった、値をセットしようとした変数の値は変わってないので動くんだけど動作がおかしい、とかいうびみょうに問題箇所を見つけにくいバグが起こらず、それでいてそれらと同等の簡素な記述ができる。いいことだ。</p>
            <p>＊</p>
            <p>例外処理は存在しないんだけど、関数を抜けた時に処理を行うようにするdeferというものがあり、これでRAIIと同じようなことができるので大して困らなそう。</p>
            <p>スレッドは存在しないみたいだけど、ゴルーチンというものがあって、それで処理の並列化ができる。チャネルというものを使えば、同期を取ることもできる。らしい。どっちもまだ使ってない。deferもだけど。</p>
            <p>パッケージ外へ提供するもの、しないものの設定方法がちょっとユニーク。先頭文字が大文字ならパッケージ外からアクセスできる、小文字ならできない。らしいんだけど、小文字のものでもアクセスできる場合があるんだけどいいのかなぁ。</p>
            <p>名前によって外部からアクセスできるかどうか決める、というのはちょっとPythonぽいな、とか思った。あっちはほとんどただのコーディング規約だけど。</p>
            <p>構造体とかインターフェース周りもまだ触っていないんだけど、JavaやC++のクラスとかとはまた違った空気がしていて興味深い。</p>
            <p>＊</p>
            <p>dpをGoで書くのもありかもしんないなぁとか思った。</p>
        </div>
        <hr />
        <div>
            <h2>2013/06/07 00:18</h2>
            <p>おはようございます。</p>
            <p>＊</p>
            <p>諸事情によりサーバを移転しました。現在はサーバというか、<a href="https://developers.google.com/appengine/?hl=ja" target="_blank">Google App Engine</a>の1アプリとしてサイトを稼働させています。</p>
            <p>＊</p>
            <p>ある日、レンタルスペースに配置したMovable Typeにログインしても、ページ遷移したらすぐログアウトしちゃうようになってて、困っていた。</p>
            <p>原因はDBの容量がいっぱいになっちゃてて、セッション情報すら持てないような状況だった、ってことなんだけど。</p>
            <p>サイトのコントロールパネルから、DBの全テーブルに最適化をかければいくらか容量空くだろう、と思って最適化しようとするも、insertできません＞＜権限ないんで＞＜とかわけのわからんこと言われるし。</p>
            <p>deleteは通るし、とりあえずスパムコメントのレコードだけでも消しておくか、なんか変わるかもしれんし、とかやって放置していた。</p>
            <p>＊</p>
            <p>で、今日になって、dpにまた1つ機能ができたので、それについて記事書くかーとMovable Typeにログインしようとしたら404。サイトのコントロールパネルにログインしたら、アカウントはブロックされていますだって。</p>
            <p>私だってなんとかしたかったがどうしようもなかったからしょうがないじゃないの。どうすりゃよかったと言うのだ。問い合わせ？英語むり。</p>
            <p>そんなわけで、以前から考えていたGoogle App Engineへの移転に踏み切ったわけです。DBの容量10MBとか最初から無茶だったんだ。アカウントはブロックされていますのページに可能な対応と思われることが色々書かれていたが英語とか読めねぇしもうたくさんだ。海外の鯖なせいかレスポンス性能もよろしくないというか稀によく落ちてるし。</p>
            <p>Google App EngineはGoogle先生が運営してるんで、レスポンス性能は前よりずっといいと思う、多分。稀によく落ちることもないんじゃないかな、多分。</p>
            <p>＊</p>
            <p>Google App Engineに移転したといっても、現時点では<a href="https://bitbucket.org/tekuto/tekuto-net/src" target="_blank">見ての通り</a>タグ打ちの静的なページだけ。staticの中ね。</p>
            <p>そのうち、タグ打ちしなくてもブラウザ上から投稿だとか、投稿に対してコメントだとか、そういうのできるようにする予定は一応あるんで。</p>
            <p>でもめんどいんでしばらくお待ち下さいと思ったが、dpがちょうどいいところだし、進めてみようかなぁ。</p>
            <p>飽きたらすぐdpの開発に戻るが。</p>
            <p>＊</p>
            <p>とまぁ、しばらくはこんな感じで、昔みたいな1ページ運用になるのでよろしくお願いします。</p>
        </div>
        <hr />
        <div>
            <p><a href="/">戻る</a></p>
        </div>
    </body>
</html>
